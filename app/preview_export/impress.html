<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=1024" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title>Deck Title</title>

<meta name="description" content="TODO" />
<meta name="author" content="TODO" />

<style>
.componentContainer {
    position: absolute;
    line-height: normal;
    /*-webkit-transform-origin: 135% 135%;
    -moz-transform-origin: 135% 135%;
    transform-origin: 135% 135%;*/
}

.transformContainer {
    -webkit-transform-origin: 0 0;
    -moz-transform-origin: 0 0;
    transform-origin: 0 0;
}

.bg {
    width: 100%;
    height: 100%;
}
</style>


<link rel="stylesheet" href="{{ asset('preview_export/css/themes/default-reset.css') }}">
<link rel="stylesheet" href="{{ asset('preview_export/css/main.css') }}" type='text/css' />
<link rel="stylesheet" href="{{ asset('preview_export/reveal/css/theme/default.css') }}" id="theme">
<style>
    @font-face {
        font-family: 'Lato';
        font-style: normal;
        font-weight: 700;
        src: local('Lato Bold'), local('Lato-Bold'), url('{{ asset('preview_export/css/Lato-Bold.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Hammersmith One';
        font-style: normal;
        font-weight: 400;
        src: local('Hammersmith One'), local('HammersmithOne'), url('{{ asset('preview_export/css/HammersmithOne.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Gorditas';
        font-style: normal;
        font-weight: 400;
        src: local('Gorditas'), local('Gorditas-Regular'), url('{{ asset('preview_export/css/Gorditas-Regular.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Fredoka One';
        font-style: normal;
        font-weight: 400;
        src: local('Fredoka One'), local('FredokaOne-Regular'), url('{{ asset('preview_export/css/FredokaOne-Regular.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Ubuntu';
        font-style: normal;
        font-weight: 400;
        src: local('Ubuntu'), url('{{ asset('preview_export/css/Ubuntu.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Ubuntu';
        font-style: normal;
        font-weight: 700;
        src: local('Ubuntu Bold'), local('Ubuntu-Bold'), url('{{ asset('preview_export/css/Ubuntu-Bold.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'PressStart2P';
        font-style: normal;
        font-weight: 400;
        src: local('Press Start 2P'), local('PressStart2P-Regular'), url('{{ asset('preview_export/css/PressStart2P-Regular.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Lato';
        font-style: italic;
        font-weight: 700;
        src: local('Lato Bold Italic'), local('Lato-BoldItalic'), url('{{ asset('preview_export/css/Lato-BoldItalic.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Abril Fatface';
        font-style: normal;
        font-weight: 400;
        src: local('Abril Fatface'), local('AbrilFatface-Regular'), url('{{ asset('preview_export/css/AbrilFatface-Regular.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Lato';
        font-style: normal;
        font-weight: 400;
        src: local('Lato Regular'), local('Lato-Regular'), url('{{ asset('preview_export/css/Lato-Regular.woff') }}') format('woff');
    }
    @font-face {
        font-family: 'Droid Sans Mono';
        font-style: normal;
        font-weight: 700;
        src: local('Droid Sans Mono'), local('Droid-Sans-Mono'), url('{{ asset('preview_export/css/Droid-Sans-Mono.woff') }}') format('woff');
    }
</style>
<link rel='stylesheet' href="{{ asset('styles/strut.themes/backgroundClasses.css') }}" type='text/css' />
<link rel='stylesheet' href="{{ asset('styles/strut.themes/surfaceClasses.css') }}" type='text/css' />

<link rel="shortcut icon" href="{{ asset('favicon.png') }}" type='image/png' />
<link rel="apple-touch-icon" href="{{ asset('apple-touch-icon.png') }}" type='image/png' />

<style>
    .reveal.themedArea {
        display: block;
        position: absolute;
        top: 0px;
        left: 0px;
        z-index: 0;
        width: 100%;
        height: 100%;
    }

    .popup {
        position: absolute;
        pointer-events: auto;
        top: 15px;
        left: 15px;
        z-index: 2000;
    }
</style>
<script type="text/javascript" src="{{ asset('preview_export/scripts/dataset-shim.js') }}"></script>
<script type="text/javascript" src="{{ asset('preview_export/scripts/impress.js') }}"></script>
<script type="text/javascript" src="{{ asset('preview_export/scripts/jquery.js') }}"></script>
<script src="https://framasoft.org/nav/nav.js" type="text/javascript"></script>
<script type="text/javascript" src="{{ asset('preview_export/scripts/onready.js') }}"></script>
<script>
$(document).ready(function() {
    ready(function () {
        if (document.getElementById('launched-placeholder')) {
            var presentation = "{% spaceless %}{{ presentation.rendered | e('js') }}{% endspaceless %}";
            var config = JSON.parse('{% spaceless %}{{ presentation.previewConfig | e('js') }}{% endspaceless %}');
        }

        if (presentation) {
            document.body.innerHTML = presentation;
            document.body.className = config.surface + " " + document.body.className;
        }

        if (!window.presStarted) {
            startPres(document, window);
            impress().init();
        }

        if ("ontouchstart" in document.documentElement) {
            document.querySelector(".hint").innerHTML =
                    "<p>Tap on the left or right to navigate</p>";
        }

        var body = $('body');

        body.prepend('<div class="popup"><button class="btn btn-default hidden" id="fork"><span class="glyphicon glyphicon-pencil"></span></button></div>');
        var fork = $('#fork');

          if (window.location.hash === '#/overview') {
            if (fork.hasClass('hidden')) {
              fork.removeClass('hidden');
            }
          }

        window.addEventListener("hashchange", function() {
          if (window.location.hash !== '#/overview') {
            if (!fork.hasClass('hidden')) {
                fork.addClass('hidden');
                }
            } else {
            fork.removeClass('hidden');
          }
        }, false);

        body.on('click', '#fork', function() {

          {% set currentRoute = app.request.attributes.get('_route') %}
          {% if currentRoute == 'preview' %}
            window.location = window.location.origin + '{{ path('app', {'_fragment': presentation.title}) }}';
          {% else %}
              var titre = prompt('Titre');
              if (!titre) {
                return;
              }
              $.ajax({
                url: '{{ path('create-from-template', {'id': presentation.id}) }}',
                method: 'POST',
                data: {
                  title: titre,
                  export: true,
                },
                success: function (data) {
                  window.location.pathname = 'app#' + data.title;
                }
              });

          {% endif %}

        });
    });
});
</script>
</head>
<body class="impress-not-supported">
    <div id="launched-placeholder"></div>
</body>
</html>
